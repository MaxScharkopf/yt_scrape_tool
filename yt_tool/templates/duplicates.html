{% extends "base.html" %}
{% block title %}Duplicates – YT Scrape Tool{% endblock %}
{% block content %}

<h2 class="mb-1">Duplicate Videos</h2>
<p class="text-muted mb-4">Videos that appeared in more than one search query.</p>

{% if not rows %}
<div class="alert alert-success">
  No duplicates found — every video appears under exactly one query.
</div>
{% else %}
<p class="text-muted small mb-2">{{ rows|length }} video(s) found across multiple queries.</p>
<div class="table-responsive shadow-sm rounded">
  <table class="table table-striped table-hover table-sm mb-0 bg-white">
    <thead class="table-dark">
      <tr>
        <th>#</th>
        <th>Title</th>
        <th>Channel</th>
        <th># Queries</th>
        <th>Queries</th>
        <th>Views</th>
      </tr>
    </thead>
    <tbody>
      {% for r in rows %}
      <tr>
        <td class="text-muted">{{ loop.index }}</td>
        <td><a href="{{ r.url }}" target="_blank" class="text-decoration-none">
          {{ r.title[:55] }}{% if r.title|length > 55 %}…{% endif %}
        </a></td>
        <td>{{ r.channel }}</td>
        <td><span class="badge bg-warning text-dark">{{ r.query_count }}</span></td>
        <td><small class="text-muted">{{ r.queries }}</small></td>
        <td>{{ r.views or "N/A" }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endif %}

{% endblock %}
